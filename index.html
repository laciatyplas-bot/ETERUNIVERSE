<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETERNIVERSE â€” Interaktywna Mapa Uniwersum EterSeeker</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5em;
            margin: 0;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .header p {
            font-size: 1.2em;
            opacity: 0.8;
            margin-top: 10px;
        }
        #map {
            height: 70vh;
            width: 100%;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            position: relative;
        }
        .legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
        }
        .controls {
            text-align: center;
            margin-top: 20px;
        }
        .btn {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            color: white;
            padding: 12px 24px;
            margin: 0 10px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
        }
        .btn:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .info-panel {
            background: rgba(0,0,0,0.7);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .popup-content {
            font-size: 1.1em;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸŒŒ ETERNIVERSE</h1>
        <p>Interaktywna mapa uniwersum ksiÄ…Å¼ek EterSeeker</p>
    </div>

    <div id="map"></div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-color" style="background: #ff6b6b;"></div>
            <span>Psyche</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #4ecdc4;"></div>
            <span>CieÅ„</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #45b7d1;"></div>
            <span>Wola</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #96ceb4;"></div>
            <span>ObfitoÅ›Ä‡</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #feca57;"></div>
            <span>Pole</span>
        </div>
    </div>

    <div class="controls">
        <button class="btn" onclick="resetView()">ðŸ”„ Reset Widok</button>
        <button class="btn" onclick="toggleConnections()">ðŸ”— PoÅ‚Ä…czenia</button>
    </div>

    <div class="info-panel" id="info-panel">
        <h3>Kliknij na bramÄ™, aby odkryÄ‡ powiÄ…zania...</h3>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script>
        // Inicjalizacja mapy
        const map = L.map('map').setView([52.2297, 21.0122], 7); // Centrum Polski
        
        // Custom tiles dla efektu kosmicznego
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap',
            opacity: 0.3
        }).addTo(map);

        // Dane uniwersum EterSeeker
        const universeData = {
            gates: [
                {
                    name: "Brama Psyche",
                    series: "Psyche",
                    coords: [52.2297, 19.0],
                    color: "#ff6b6b",
                    description: "Pierwsza brama Å›wiadomoÅ›ci. PoczÄ…tek podrÃ³Å¼y przez umysÅ‚y Eteru.",
                    connections: ["Brama CieÅ„", "Brama Wola"]
                },
                {
                    name: "Brama CieÅ„",
                    series: "CieÅ„", 
                    coords: [50.0647, 19.9450],
                    color: "#4ecdc4",
                    description: "Ujawnienie ukrytych wymiarÃ³w. Tam gdzie Å›wiatÅ‚o spotyka ciemnoÅ›Ä‡.",
                    connections: ["Brama Psyche", "Brama Pole"]
                },
                {
                    name: "Brama Wola",
                    series: "Wola",
                    coords: [54.309, 20.0],
                    color: "#45b7d1",
                    description: "SiÅ‚a determinacji ksztaÅ‚tujÄ…ca rzeczywistoÅ›Ä‡ Eteru.",
                    connections: ["Brama Psyche", "Brama ObfitoÅ›Ä‡"]
                },
                {
                    name: "Brama ObfitoÅ›Ä‡",
                    series: "ObfitoÅ›Ä‡",
                    coords: [51.0, 22.0],
                    color: "#96ceb4",
                    description: "NieskoÅ„czone moÅ¼liwoÅ›ci i bogactwo energetyczne.",
                    connections: ["Brama Wola", "Brama Pole"]
                },
                {
                    name: "Brama Pole",
                    series: "Pole",
                    coords: [52.0, 21.0],
                    color: "#feca57",
                    description: "Centralny punkt rÃ³wnowagi wszystkich siÅ‚ Eteru.",
                    connections: ["Brama CieÅ„", "Brama ObfitoÅ›Ä‡"]
                }
            ]
        };

        // StwÃ³rz markery
        const markers = [];
        const connections = L.layerGroup().addTo(map);
        let showConnections = true;

        universeData.gates.forEach((gate, index) => {
            // Marker
            const marker = L.circleMarker(gate.coords, {
                radius: 15,
                fillColor: gate.color,
                color: '#fff',
                weight: 3,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(map);

            marker.bindPopup(`
                <div class="popup-content">
                    <h3 style="color: ${gate.color}; margin: 0 0 10px 0;">${gate.name}</h3>
                    <p><strong>Seria:</strong> ${gate.series}</p>
                    <p>${gate.description}</p>
                    <p><em>Kliknij inne bramy, by zobaczyÄ‡ powiÄ…zania</em></p>
                </div>
            `);

            marker.on('mouseover', function() {
                this.setStyle({ radius: 20, fillOpacity: 1 });
            });

            marker.on('mouseout', function() {
                this.setStyle({ radius: 15, fillOpacity: 0.8 });
            });

            markers.push({ marker, data: gate });
        });

        // Rysuj poÅ‚Ä…czenia
        function drawConnections() {
            connections.clearLayers();
            markers.forEach((m1, i) => {
                m1.data.connections.forEach(connName => {
                    const target = universeData.gates.find(g => g.name === connName);
                    if (target) {
                        const targetMarker = markers.find(m => 
                            m.data.name === target.name
                        );
                        if (targetMarker) {
                            L.polyline([m1.marker.getLatLng(), targetMarker.marker.getLatLng()], {
                                color: 'rgba(255,255,255,0.3)',
                                weight: 2,
                                opacity: 0.6
                            }).addTo(connections);
                        }
                    }
                });
            });
        }

        drawConnections();

        // Funkcje sterowania
        function resetView() {
            map.setView([52.2297, 21.0122], 7);
        }

        function toggleConnections() {
            showConnections = !showConnections;
            if (showConnections) {
                connections.addTo(map);
            } else {
                map.removeLayer(connections);
            }
        }

        // Animacja powitalna
        setTimeout(() => {
            map.eachLayer(layer => {
                if (layer instanceof L.CircleMarker) {
                    layer.setStyle({ radius: 20 });
                    setTimeout(() => {
                        layer.setStyle({ radius: 15 });
                    }, 500);
                }
            });
        }, 1000);

        // Info panel
        document.getElementById('info-panel').innerHTML = `
            <h3>ðŸŒŸ Witaj w ETERNIVERSE</h3>
            <p>Klikaj bramy aby odkrywaÄ‡ powiÄ…zania miÄ™dzy seriami: <strong>Psyche â€¢ CieÅ„ â€¢ Wola â€¢ ObfitoÅ›Ä‡ â€¢ Pole</strong></p>
            <p>UÅ¼yj kÃ³Å‚ka myszy do zoomu, przeciÄ…gnij mapÄ™ aby siÄ™ poruszaÄ‡.</p>
        `;
    </script>
</body>
</html>