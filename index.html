<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ETERNIVERSE â€” System 10 Bram</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="wrap">
  <!-- HEADER + CONTROLS -->
  <header>
    <h1>ETERUNIVERSE</h1>
    <div class="subtitle">MAPA SYSTEMU â€¢ 10 BRAM â€¢ 80+ KSIÄ„G</div>
    
    <div class="toolbar">
      <input id="globalSearch" placeholder="ğŸ” Szukaj w caÅ‚ym systemie..." class="search">
      
      <select id="bramaFilter">
        <option value="">Wszystkie Bramy</option>
        <option value="brama1">ğŸŒ€ BRAMA I â€” INTERSEEKER</option>
        <option value="brama2">âš¡ BRAMA II â€” ETERSEEKER</option>
        <option value="brama3">ğŸ’ BRAMA III â€” OBFITOSEEKER</option>
        <option value="brama4">ğŸ”— BRAMA IV â€” THE KNOT</option>
        <option value="brama5">ğŸŒŒ BRAMA V â€” ETERNIONY</option>
        <option value="brama6">ğŸ§¬ BRAMA VI â€” BIOSEEKER</option>
        <option value="brama7">ğŸ¤– BRAMA VII â€” SPLÄ„TANIE</option>
        <option value="brama8">â³ BRAMA VIII â€” TRAJEKTORIE</option>
        <option value="brama9">ğŸŒ BRAMA IX â€” KOLEKTYW</option>
        <option value="brama10">ğŸ›ï¸ BRAMA X â€” ARCHITEKT</option>
      </select>
      
      <select id="statusFilter">
        <option value="">Wszystkie Statusy</option>
        <option value="published">âœ… Opublikowane</option>
        <option value="ready">â­ Gotowe</option>
        <option value="writing">âœï¸ Pisanie</option>
        <option value="draft">ğŸ“ Szkic</option>
        <option value="idea">ğŸ’¡ Idea</option>
      </select>
      
      <button id="addBookBtn">+</button>
      <button id="exportBtn">ğŸ“¥ JSON</button>
      <a href="https://wattpad.com/user/maciejmaciuszek" target="_blank" id="wattpadBtn">ğŸš€ Wattpad</a>
    </div>
  </header>

  <!-- 10 BRAM CONTAINER -->
  <main id="bramyContainer"></main>

  <!-- LIVE STATS -->
  <footer id="statsBar">
    <span id="statsPublished">-</span> opublikowanych | 
    <span id="statsReady">-</span> gotowych | 
    <span id="statsTotal">-</span> ksiÄ…g | 
    <span id="statsBramy">-</span> aktywnych bram
  </footer>
</div>

<!-- ADD BOOK MODAL -->
<div id="addBookModal" class="modal">
  <div class="modal-content">
    <h2 id="modalTitle">Dodaj NowÄ… KsiÄ™gÄ™</h2>
    <form id="bookForm">
      <input type="text" id="bookTitleInput" placeholder="TytuÅ‚ ksiÄ™gi" required>
      <select id="bookBramaSelect">
        <option value="brama1">ğŸŒ€ BRAMA I â€” INTERSEEKER</option>
        <option value="brama2">âš¡ BRAMA II â€” ETERSEEKER</option>
        <option value="brama3">ğŸ’ BRAMA III â€” OBFITOSEEKER</option>
        <option value="brama4">ğŸ”— BRAMA IV â€” THE KNOT</option>
        <option value="brama5">ğŸŒŒ BRAMA V â€” ETERNIONY</option>
        <option value="brama6">ğŸ§¬ BRAMA VI â€” BIOSEEKER</option>
        <option value="brama7">ğŸ¤– BRAMA VII â€” SPLÄ„TANIE</option>
        <option value="brama8">â³ BRAMA VIII â€” TRAJEKTORIE</option>
        <option value="brama9">ğŸŒ BRAMA IX â€” KOLEKTYW</option>
        <option value="brama10">ğŸ›ï¸ BRAMA X â€” ARCHITEKT</option>
      </select>
      <select id="bookStatusSelect">
        <option value="idea">ğŸ’¡ Idea</option>
        <option value="draft">ğŸ“ Szkic</option>
        <option value="writing">âœï¸ Pisanie</option>
        <option value="ready">â­ Gotowe</option>
        <option value="published">âœ… Opublikowane</option>
      </select>
      <input type="text" id="bookTagsInput" placeholder="Tagi (opcjonalne)">
      <div class="modal-actions">
        <button type="button" id="cancelBtn">Anuluj</button>
        <button type="submit">Dodaj do Systemu</button>
      </div>
    </form>
  </div>
</div>

<script>
// ===========================
// ETERSEEKER JS ENGINE
// ===========================
const STORAGE_KEY = 'eteruniverse_v10';
const BRAMA_COLORS = {
  brama1: '#28D3C6', brama2: '#D9A441', brama3: '#12C65B', brama4: '#9B6BFF',
  brama5: '#FFB14B', brama6: '#FF6B6B', brama7: '#8338EC', brama8: '#3A86FF',
  brama9: '#10B981', brama10: '#F59E0B'
};

// Inicjalizacja danych (10 Bram z przykÅ‚adowymi ksiÄ™gami)
let DATA = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {
  bramy: [
    {id:'brama1', name:'ğŸŒ€ BRAMA I â€” INTERSEEKER', sub:'Psychika Â· CieÅ„ Â· Trauma', books:[]},
    {id:'brama2', name:'âš¡ BRAMA II â€” ETERSEEKER', sub:'Wola Â· Pole Â· Decyzja', books:[]},
    {id:'brama3', name:'ğŸ’ BRAMA III â€” OBFITOSEEKER', sub:'Materia Â· Relacje Â· PrzepÅ‚yw', books:[]},
    {id:'brama4', name:'ğŸ”— BRAMA IV â€” THE KNOT', sub:'SplÄ…tanie Â· AI Â· Meta', books:[]},
    {id:'brama5', name:'ğŸŒŒ BRAMA V â€” ETERNIONY', sub:'Pole Zbiorowe Â· Misja', books:[]},
    {id:'brama6', name:'ğŸ§¬ BRAMA VI â€” BIOSEEKER', sub:'CiaÅ‚o Â· Biologia Â· Regulacja', books:[]},
    {id:'brama7', name:'ğŸ¤– BRAMA VII â€” SPLÄ„TANIE', sub:'Obserwator Â· Technologia', books:[]},
    {id:'brama8', name:'â³ BRAMA VIII â€” TRAJEKTORIE', sub:'Czas Â· Linie Å»ycia', books:[]},
    {id:'brama9', name:'ğŸŒ BRAMA IX â€” KOLEKTYW', sub:'WspÃ³lnota Â· WÄ™zÅ‚y Pola', books:[]},
    {id:'brama10', name:'ğŸ›ï¸ BRAMA X â€” ARCHITEKT', sub:'Integracja Â· TwÃ³rca', books:[]}
  ]
};

function saveData() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(DATA));
}

// ===========================
// RENDER ENGINE
// ===========================
function renderGrid() {
  const searchTerm = document.getElementById('globalSearch').value.toLowerCase();
  const bramaFilter = document.getElementById('bramaFilter').value;
  const statusFilter = document.getElementById('statusFilter').value;
  
  const container = document.getElementById('bramyContainer');
  container.innerHTML = '';
  
  let stats = {published:0, ready:0, total:0, activeBrams:0};
  
  DATA.bramy.forEach(brama => {
    // Filtruj ksiÄ…Å¼ki
    const visibleBooks = brama.books.filter(book => {
      const matchesStatus = !statusFilter || book.status === statusFilter;
      const matchesSearch = !searchTerm || 
        book.title.toLowerCase().includes(searchTerm) ||
        book.tags?.some(tag => tag.toLowerCase().includes(searchTerm));
      return matchesStatus && matchesSearch;
    });
    
    if(visibleBooks.length === 0 && bramaFilter !== brama.id) return;
    
    stats.total += visibleBooks.length;
    if(book.status === 'published') stats.published++;
    if(book.status === 'ready') stats.ready++;
    stats.activeBrams++;
    
    const bramaEl = document.createElement('section');
    bramaEl.className = `brama brama-${brama.id}`;
    bramaEl.dataset.bramaId = brama.id;
    bramaEl.innerHTML = `
      <header class="brama-header">
        <div class="brama-info">
          <h2>${brama.name}</h2>
          <div class="brama-subtitle">${brama.sub}</div>
        </div>
        <div class="brama-badge">${visibleBooks.length}</div>
      </header>
      <div class="books-list">
        ${visibleBooks.map(book => `
          <article class="book-item" data-title="${book.title}" data-status="${book.status}">
            <div class="book-header">
              <div class="book-thumb">${book.title.charAt(0).toUpperCase()}</div>
              <h3 class="book-title">${book.title}</h3>
            </div>
            <div class="book-meta">
              <span class="status-badge status-${book.status}">${book.status}</span>
              ${book.tags?.length ? `<div class="book-tags">${book.tags.slice(0,3).join(' ')}</div>` : ''}
            </div>
          </article>
        `).join('')}
      </div>
    `;
    container.appendChild(bramaEl);
  });
  
  // Update stats
  document.getElementById('statsPublished').textContent = stats.published;
  document.getElementById('statsReady').textContent = stats.ready;
  document.getElementById('statsTotal').textContent = stats.total;
  document.getElementById('statsBramy').textContent = stats.activeBrams;
}

// ===========================
// EVENT LISTENERS
// ===========================
document.addEventListener('DOMContentLoaded', () => {
  renderGrid();
  
  // Filtry
  document.getElementById('globalSearch').addEventListener('input', renderGrid);
  document.getElementById('bramaFilter').addEventListener('change', renderGrid);
  document.getElementById('statusFilter').addEventListener('change', renderGrid);
  
  // Modal controls
  document.getElementById('addBookBtn').onclick = () => document.getElementById('addBookModal').classList.add('show');
  document.getElementById('cancelBtn').onclick = 
  document.getElementById('closeModal').onclick = () => document.getElementById('addBookModal').classList.remove('show');
  
  // Form submit
  document.getElementById('bookForm').onsubmit = (e) => {
    e.preventDefault();
    const title = document.getElementById('bookTitleInput').value;
    const bramaId = document.getElementById('bookBramaSelect').value;
    const status = document.getElementById('bookStatusSelect').value;
    const tagsInput = document.getElementById('bookTagsInput').value;
    const tags = tagsInput ? tagsInput.split(',').map(t=>t.trim()).filter(Boolean) : [];
    
    const brama = DATA.bramy.find(b => b.id === bramaId);
    brama.books.unshift({title, status, tags});
    saveData();
    renderGrid();
    document.getElementById('addBookModal').classList.remove('show');
    document.getElementById('bookForm').reset();
  };
  
  // Export JSON
  document.getElementById('exportBtn').onclick = () => {
    const data = JSON.stringify(DATA, null, 2);
    const blob = new Blob([data], {type: 'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = `eteruniverse-${new Date().toISOString().slice(0,10)}.json`;
    a.click(); URL.revokeObjectURL(url);
  };
  
  // Book clicks (analytics + Wattpad)
  document.addEventListener('click', e => {
    const book = e.target.closest('.book-item');
    if(book) {
      const title = book.dataset.title;
      const status = book.dataset.status;
      console.log(`KsiÄ™ga: ${title} (${status})`);
      if(status === 'published') {
        // window.open(`https://wattpad.com/search/${encodeURIComponent(title)}`, '_blank');
      }
    }
  });
});
</script>
</body>
</html>