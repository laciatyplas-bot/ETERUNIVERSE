<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ETERNIVERSE â€” Åšwiat I: PSYCHE / INTERSEEKER</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="favicon.ico">
</head>
<body>
  <header>
    <h1>ğŸŒŒ ETERNIVERSE â€” Åšwiat I: PSYCHE</h1>
    <p>System redakcyjny Kroniki Woli â€” Architekt: Maciej Maciuszek</p>
    <div class="header-buttons">
      <button id="addBookBtn">+ Dodaj ksiÄ…Å¼kÄ™</button>
      <button id="exportBtn">ğŸ’¾ Eksport JSON</button>
      <button id="openConsoleBtn">ğŸª Konsola Belle</button>
    </div>
  </header>

  <main id="app">
    <p class="loading">Åadowanie systemu ETERNIVERSE<span class="dots">...</span></p>
    <div id="error-message" style="display:none; color:#ff6b6b; text-align:center; padding:2rem;">
      <h2>BÅ‚Ä…d Å‚adowania</h2>
      <p>Nie udaÅ‚o siÄ™ zaÅ‚adowaÄ‡ silnika. SprawdÅº konsolÄ™ (F12) i upewnij siÄ™, Å¼e plik <code>js/engine_loader.js</code> istnieje.</p>
    </div>
  </main>

  <!-- Belle avatar -->
  <div id="belle" class="belle-avatar">
    <img src="media/covers/default.jpg" alt="Belle" onerror="this.src='https://via.placeholder.com/150?text=Belle'">
    <div id="belleSpeech">CzeÅ›Ä‡, Architekcie... Å‚adujÄ™ system...</div>
  </div>

  <!-- Modal edycji ksiÄ…Å¼ki -->
  <div id="modal" class="modal hidden">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal()">Ã—</span>
      <h2 id="modalTitle">Nowa ksiÄ…Å¼ka</h2>
      <label>Brama:</label>
      <select id="gateSelect"></select>
      <label>TytuÅ‚:</label>
      <input type="text" id="bookTitle" placeholder="TytuÅ‚ ksiÄ…Å¼ki">
      <label>Opis:</label>
      <textarea id="bookDesc" placeholder="Opis ksiÄ…Å¼ki..."></textarea>
      <label>OkÅ‚adka (Å›cieÅ¼ka lub URL):</label>
      <input type="text" id="bookCover" placeholder="media/covers/example.jpg lub https://...">
      <label>Plik audio (Å›cieÅ¼ka lub URL):</label>
      <input type="text" id="bookAudio" placeholder="media/audio/example.mp3 lub https://...">
      <div class="modal-actions">
        <button id="cancelBtn">Anuluj</button>
        <button id="saveBtn">Zapisz</button>
      </div>
    </div>
  </div>

  <!-- Skrypty â€“ kolejnoÅ›Ä‡ waÅ¼na -->
  <script src="js/engine_loader.js"></script>
  <script src="js/core.js"></script>
  <script src="js/book_editor.js"></script>
  <script src="js/eter_console.js"></script>
  <script src="js/world_psyche.js"></script>

  <!-- Fallback jeÅ›li coÅ› siÄ™ nie zaÅ‚aduje -->
  <script>
    window.addEventListener('error', function(e) {
      if (e.filename.includes('engine_loader.js')) {
        document.querySelector('.loading').style.display = 'none';
        document.getElementById('error-message').style.display = 'block';
      }
    });

    // Prosty loader animowany
    setInterval(() => {
      const dots = document.querySelector('.dots');
      if (dots) dots.textContent = dots.textContent.length < 6 ? dots.textContent + '.' : '...';
    }, 500);
  </script>
</body>
</html>
